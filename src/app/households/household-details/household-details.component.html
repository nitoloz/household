<a mat-button [routerLink]="['/households']">
  <mat-icon>arrow_back</mat-icon>
  Back To List
</a>
<mat-card>
  <mat-card-title>
    <mat-icon class="header-icon">{{householdsService.householdTypeIcon(simulation.type)}}</mat-icon>
    {{simulation.simName}}
  </mat-card-title>
  <mat-card-content>
    <div class="section">
      <h2 class="mat-h2">Household Availabilities</h2>
      <mat-accordion>
        <mat-expansion-panel *ngFor="let availability of simulation.availabilities">
          <mat-expansion-panel-header>
            <mat-panel-title>
              {{availability.name}}
            </mat-panel-title>
            <mat-panel-description>
              {{availability.creationDate.$date | date:'medium'}}
            </mat-panel-description>
          </mat-expansion-panel-header>
          <ng-template matExpansionPanelContent>
            <table mat-table [dataSource]="availability.activities">
              <ng-container matColumnDef="name">
                <th mat-header-cell *matHeaderCellDef> Activity</th>
                <td mat-cell *matCellDef="let row"> {{row.name}}</td>
              </ng-container>
              <ng-container matColumnDef="start">
                <th mat-header-cell *matHeaderCellDef>Start</th>
                <td mat-cell *matCellDef="let row">{{row.start.$date| date:'shortTime'}}</td>
              </ng-container>
              <ng-container matColumnDef="end">
                <th mat-header-cell *matHeaderCellDef>End</th>
                <td mat-cell *matCellDef="let row">{{row.end.$date | date:'shortTime'}}</td>
              </ng-container>
              <ng-container matColumnDef="type">
                <th mat-header-cell *matHeaderCellDef> Type</th>
                <td mat-cell *matCellDef="let row">{{row.type}}</td>
              </ng-container>
              <tr mat-header-row *matHeaderRowDef="activityTableColumns"></tr>
              <tr mat-row *matRowDef="let rowData; columns: activityTableColumns"></tr>
            </table>
          </ng-template>
        </mat-expansion-panel>
      </mat-accordion>
    </div>
    <mat-divider></mat-divider>
    <div class="section">

      <h2 class="mat-h2">Household Appliances</h2>
      <table mat-table [dataSource]="simulation.appliances">
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef> Name</th>
          <td mat-cell *matCellDef="let row"> {{row.name}}</td>
        </ng-container>
        <ng-container matColumnDef="inputOn">
          <th mat-header-cell *matHeaderCellDef>Power Input On</th>
          <td mat-cell *matCellDef="let row">{{row.operationalModes[0].powerInputOn}}</td>
        </ng-container>
        <ng-container matColumnDef="inputOff">
          <th mat-header-cell *matHeaderCellDef>Power Input Off</th>
          <td mat-cell *matCellDef="let row">{{row.operationalModes[0].powerInputOff}}</td>
        </ng-container>
        <ng-container matColumnDef="duration">
          <th mat-header-cell *matHeaderCellDef> Duration</th>
          <td mat-cell *matCellDef="let row">{{row.operationalModes[0].duration}}</td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="applianceTableColumns"></tr>
        <tr mat-row *matRowDef="let rowData; columns: applianceTableColumns"></tr>
      </table>
    </div>
    <mat-divider></mat-divider>
    <div class="section chart-section">
      <h2 class="mat-h2">Household Load Curve Chart</h2>
      <div class="line-chart">
        <ngx-charts-line-chart
          [legend]="true"
          [showXAxisLabel]="true"
          [showYAxisLabel]="true"
          [xAxis]="true"
          [yAxis]="true"
          [xAxisLabel]="'Time'"
          [yAxisLabel]="'Load'"
          [timeline]="false"
          [results]="chartData">
        </ngx-charts-line-chart>
      </div>
    </div>
  </mat-card-content>
</mat-card>
